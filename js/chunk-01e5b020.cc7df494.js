(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01e5b020"],{"69b1":function(t,e,a){},b133:function(t,e,a){"use strict";var s=a("69b1"),r=a.n(s);r.a},c06a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{sm:"12"}},[a("div",{staticClass:"d-flex"},[a("h1",[t._v("Orders history")]),a("b-button",{staticClass:"ml-auto mb-auto mt-auto",attrs:{variant:"success",size:"sm"},on:{click:function(e){return t.$router.push({name:"Create Order"})}}},[t._v("Create Order")])],1),a("div",[a("b-row",[a("b-col",{attrs:{sm:"4"}},[a("label",[t._v("Select Date From")]),a("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"dateFrom"},model:{value:t.date.from,callback:function(e){t.$set(t.date,"from",e)},expression:"date.from"}})],1),a("b-col",{attrs:{sm:"4"}},[a("label",[t._v("Select Date To")]),a("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"dateTo"},model:{value:t.date.to,callback:function(e){t.$set(t.date,"to",e)},expression:"date.to"}})],1),a("b-col",{attrs:{sm:"2"}},[a("label",[t._v("Select Status")]),a("b-form-select",{attrs:{options:t.statusOptions,"text-field":"label","value-field":"value"},model:{value:t.date.status,callback:function(e){t.$set(t.date,"status",e)},expression:"date.status"}})],1),a("b-col",{attrs:{sm:"2"}},[a("label",[t._v("Click to search")]),a("b-button",{staticClass:"w-100",attrs:{size:"sm",variant:"info"},on:{click:function(e){return t.search(t.date.from,t.date.to,t.date.status)}}},[a("CIcon",{attrs:{name:"cil-search"}})],1)],1)],1)],1),a("b-card",[a("b-table",{attrs:{striped:"",hover:"",items:t.items.data,fields:t.fields,busy:t.loading.main},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger "},[a("b-spinner",{staticClass:"align-middle",attrs:{variant:"primary",type:"grow"}})],1)]},proxy:!0},{key:"cell(price)",fn:function(e){return[a("b-input-group",{staticClass:"d-flex",staticStyle:{"flex-wrap":"nowrap"}},[a("b-form-input",{staticStyle:{width:"4rem"},attrs:{size:"sm",type:"text"},model:{value:e.item.price,callback:function(a){t.$set(e.item,"price",a)},expression:"row.item.price"}}),a("b-input-group-append",[a("b-button",{staticClass:"small-btn",attrs:{variant:"success",size:"sm"},on:{click:function(a){return t.editPrice(e.item)}}},[t.loading.price==e.item.id?a("b-spinner",{attrs:{type:"grow",small:""}}):a("span",[t._v("Edit")])],1)],1)],1)]}},{key:"cell(created_at)",fn:function(e){return[a("span",[t._v(t._s(t._f("moment")(e.item.created_at,"from","now")))])]}},{key:"cell(status)",fn:function(e){return[a("div",[t._v(" "+t._s(t.statusOptions.find((function(t){return t.value==e.item.status})).label)+" ")])]}},{key:"cell(description)",fn:function(e){return[a("span",{attrs:{title:e.item.description}},[t._v(" "+t._s(""+e.item.description.substring(0,10))),e.item.description.length>10?a("span",[t._v("..")]):t._e()])]}},{key:"cell(actions)",fn:function(e){return[a("div",{staticClass:"d-flex"},[a("b-button",{staticClass:"ml-1 mr-1 small-btn",attrs:{variant:"primary",size:"sm",disabled:"completed"==e.item.status},on:{click:function(a){return t.$router.push({name:"Create Packge",query:{orderId:e.item.id}})}}},[t._v("Assign")]),a("b-button",{staticClass:"ml-1 mr-1 small-btn",attrs:{variant:"info",size:"sm"},on:{click:function(a){return t.getDetails(e.item.id)}}},[t._v("details")]),a("b-button",{staticClass:"ml-1 mr-1 small-btn",attrs:{variant:"success",size:"sm"},on:{click:function(a){return t.$router.push({name:"Edit Order",params:{id:e.item.id}})}}},[t._v("Edit")]),a("b-button",{staticClass:"ml-1 mr-1 small-btn",attrs:{disabled:t.loading.delete==e.item.id,variant:"danger",size:"sm"},on:{click:function(a){return t.$bvModal.show(""+e.item.id)}}},[t.loading.delete!=e.item.id?a("span",[t._v("Delete")]):a("b-spinner",{attrs:{type:"grow",small:""}})],1)],1),a("b-modal",{attrs:{id:""+e.item.id,centered:"",title:"Delete","ok-variant":"danger","ok-title":"Yes","cancel-title":"No"},on:{ok:function(a){return t.deleteItem(e.item.id)}}},[a("div",[t._v("Are you sure that you want to delete this?")])]),a("b-modal",{attrs:{"ok-variant":"success","ok-title":"Edit",id:"details-"+e.item.id,centered:"",size:"xl",title:"Details"},on:{ok:function(a){return t.$router.push({name:"Edit Order",params:{id:e.item.id}})}}},[a("b-row",[t.loading.details?a("b-col",{staticClass:"text-center",attrs:{sm:"12"}},[a("b-spinner",{attrs:{type:"grow",variant:"primary"}})],1):t._e(),t.loading.details?t._e():[a("b-col",{attrs:{sm:"6"}},t._l(t.details.image,(function(e){return a("b-img",{key:e.id,staticClass:"w-100",staticStyle:{"max-height":"25rem","object-fit":"contain"},attrs:{src:e.image_path,title:t.details.title}})})),1),a("b-col",{staticClass:"d-flex align-items-center",attrs:{sm:"6"}},[a("b-row",[a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"4"}},[t._v(" Title: ")]),a("b-col",{staticClass:"h2 mb-0",attrs:{sm:"8"}},[t._v(" "+t._s(t.details.title)+" ")]),a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"4"}},[t._v(" Price: ")]),a("b-col",{staticClass:"h3 mb-0",attrs:{sm:"8"}},[t._v(" "+t._s(t.details.price)+" ")]),a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"4"}},[t._v(" Description: ")]),a("b-col",{attrs:{sm:"8"}},[t._v(" "+t._s(t.details.description)+" ")]),a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"4"}},[t._v(" Status: ")]),a("b-col",{attrs:{sm:"8"}},[a("span",{class:{"text-success":"completed"==t.details.status,"text-info":"processing"==t.details.status,"text-warning":"review"==t.details.status}},[t._v(t._s(t.details.status))])]),a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"4"}},[t._v(" Payment Method: ")]),a("b-col",{attrs:{sm:"8"}},[t._v(" "+t._s(t.details.payment_method.title)+" ")]),a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"4"}},[t._v(" Created At: ")]),a("b-col",{attrs:{sm:"8"}},[t._v(" "+t._s(t._f("moment")(t.details.created_at,"from","now"))+" ")])],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-card",{staticClass:"mt-4",scopedSlots:t._u([{key:"header",fn:function(){return[a("h3",[t._v("User Data")])]},proxy:!0}],null,!0)},[t.details.user?a("b-row",[a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"5"}},[t._v(" Name: ")]),a("b-col",{attrs:{sm:"7"}},[t._v(" "+t._s(t.details.user.first_name+" "+t.details.user.last_name)+" ")]),a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"5"}},[t._v(" Phone: ")]),a("b-col",{attrs:{sm:"7"}},[t._v(" "+t._s("(+"+t.details.user.phone_code+") "+t.details.user.phone)+" ")]),a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"5"}},[t._v(" Email: ")]),a("b-col",{attrs:{sm:"7"}},[t._v(" "+t._s(t.details.user.email)+" ")]),a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"5"}},[t._v(" Location: ")]),a("b-col",{attrs:{sm:"7"}},[t._v(" "+t._s(t.details.user.country.name+", "+t.details.user.state.name+", "+t.details.user.city.name)+" ")])],1):t._e()],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-card",{staticClass:"mt-4",scopedSlots:t._u([{key:"header",fn:function(){return[a("h3",[t._v("Recipient Data")])]},proxy:!0}],null,!0)},[t._l(t.details.recipient,(function(e){return[a("b-row",{key:e.id},[a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"5"}},[t._v(" Name: ")]),a("b-col",{attrs:{sm:"7"}},[t._v(" "+t._s(e.first_name+" "+e.last_name)+" ")]),a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"5"}},[t._v(" Phone: ")]),a("b-col",{attrs:{sm:"7"}},[t._v(" "+t._s("(+"+e.phone_code+") "+e.phone)+" ")]),a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"5"}},[t._v(" Address: ")]),a("b-col",{attrs:{sm:"7"}},[t._v(" "+t._s(e.address)+" ")]),a("b-col",{staticClass:"text-right text-gery",attrs:{sm:"5"}},[t._v(" Location: ")]),a("b-col",{attrs:{sm:"7"}},[t._v(" "+t._s(e.country.name+", "+e.state.name+", "+e.city.name)+" ")])],1)]}))],2)],1)]],2)],1)]}}])}),t.$route.query.page?a("div",{staticClass:"overflow-auto d-flex"},[a("b-pagination-nav",{staticClass:"m-auto",attrs:{"link-gen":t.linkGen,"number-of-pages":t.items.to,"use-router":""},on:{change:function(e){return t.getData(t.$route.query.page)}}})],1):t._e()],1)],1)],1)},r=[],i=a("a026"),n=a("bc3a"),o=a.n(n),c=a("e4b4");i["default"].use(a("2ead"));var l={name:"OrdersHistory",data:function(){return{statusOptions:[{label:"All",value:"all"},{label:"Review",value:"review"},{label:"Pending Payment",value:"pending_payment"},{label:"Processing",value:"processing"},{label:"Shipped",value:"shipped"},{label:"Completed",value:"completed"}],details:{payment_method:{}},date:{from:"",to:"",status:"all"},loading:{main:!1,price:0,delete:0,details:!1},fields:[{key:"title"},{key:"price"},{key:"description"},{key:"status"},{key:"created_at",label:"Date"},{key:"actions",label:"Actions"}],items:{data:[]}}},mounted:function(){var t=this;this.date.status=this.$route.params.status;var e=(new Date).getMonth()+1,a=(new Date).getMonth(),s=(new Date).getDay(),r=(new Date).getUTCFullYear();e.length<2&&(e=String("0"+e)),a.length<2&&(a=String("0"+a)),this.date.from="".concat(r,"-").concat(a,"-").concat(s),this.date.to="".concat(r,"-").concat(e,"-").concat(s),setTimeout((function(){t.search("".concat(r,"-").concat(a,"-").concat(s),"".concat(r,"-").concat(e,"-").concat(s),t.date.status)}),200)},methods:{search:function(t,e,a){var s=this;this.loading.main=!0;var r="";"all"!=a&&(r="/".concat(a)),o.a.get("/admin/v1/orders/date/between/".concat(t,"/").concat(e).concat(r)).then((function(t){s.items.data=t.data.data,s.loading.main=!1})).catch((function(){s.loading.main=!1}))},getData:function(t){var e=this;this.loading.main=!0,o.a.get("/admin/v1/orders?page=".concat(t)).then((function(t){e.loading.main=!1,e.items=t.data.data})).catch((function(t){e.loading.main=!1,console.error(t)}))},linkGen:function(t){return 1===t?"?":"?page=".concat(t)},getDetails:function(t){var e=this;this.loading.details=!0,this.$bvModal.show("details-".concat(t)),o.a.get("admin/v1/orders/".concat(t)).then((function(t){e.loading.details=!1,e.details=t.data.data})).catch((function(t){e.loading.details=!1,console.log(t.response)}))},editPrice:function(t){var e=this;this.loading.price=t.id,o.a.put("admin/v1/orders/".concat(t.id),{status:t.status,price:t.price}).then((function(){e.loading.price="",Object(c["showToast"])("success","Success","item price has been updated successfully",e)})).catch((function(t){for(var a in e.loading.price="",t.response.data.errors)Object(c["showToast"])("danger","".concat(a),"".concat(t.response.data.errors[a][0]),e);Object(c["showToast"])("danger","Error","".concat(t.response.data.error),e)}))},deleteItem:function(t){var e=this;this.loading.delete=t,o.a.delete("/admin/v1/orders/".concat(t)).then((function(){Object(c["showToast"])("success","Success","Item deleted successfully!",e),e.loading.delete=0,e.items=e.items.filter((function(e){return e.id!=t}))})).catch((function(t){for(var a in e.loading.delete=0,t.response.data.errors)Object(c["showToast"])("danger","".concat(a),"".concat(t.response.data.errors[a][0]),e);console.log(t.response)}))}}},d=l,u=(a("b133"),a("2877")),m=Object(u["a"])(d,s,r,!1,null,"3f97eae9",null);e["default"]=m.exports},e4b4:function(t,e){function a(t,e){return o(t)||n(t,e)||r(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"===typeof t)return i(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function n(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],s=!0,r=!1,i=void 0;try{for(var n,o=t[Symbol.iterator]();!(s=(n=o.next()).done);s=!0)if(a.push(n.value),e&&a.length===e)break}catch(c){r=!0,i=c}finally{try{s||null==o["return"]||o["return"]()}finally{if(r)throw i}}return a}}function o(t){if(Array.isArray(t))return t}function c(t,e,a,s){s.$bvToast.toast(a,{title:"".concat(e),variant:t,solid:!0,toaster:"b-toaster-top-right",autoHideDelay:5e3})}function l(t){for(var e=0,s=Object.entries(t);e<s.length;e++){var r=a(s[e],1),i=r[0];""!=t[i]&&null!=t[i]||delete t[i]}return t}function d(t){for(var e=0,s=Object.entries(t);e<s.length;e++){var r=a(s[e],1),i=r[0];t[i]="workshops"==i||"gallery"==i||"medical_services"==i?[]:""}return t}function u(t){var e,a=new FileReader;return a.onload=function(t){e=t},a.onerror=function(t){alert(t)},a.readAsDataURL(t),e}t.exports={showToast:c,removeEmptyProperties:l,imgUpload:u,resetProperties:d}}}]);
//# sourceMappingURL=chunk-01e5b020.cc7df494.js.map