(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d338e"],{"5c9c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{sm:"12"}},[a("div",{staticClass:"d-flex"},[a("h1",[t._v("Notifications")])]),a("b-card",[a("b-table",{attrs:{striped:"",hover:"",items:t.items,fields:t.fields,busy:t.loading.main},scopedSlots:t._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger "},[a("b-spinner",{staticClass:"align-middle",attrs:{variant:"primary",type:"grow"}})],1)]},proxy:!0},{key:"cell(created_at)",fn:function(e){return[a("span",[t._v(t._s(t._f("moment")(e.item.created_at,"from","now")))])]}},{key:"cell(type)",fn:function(e){return[e.item.type.includes("OrderPlaced")?a("span",[t._v("New Order")]):a("span",[t._v("Order Updated")])]}},{key:"cell(discription)",fn:function(e){return[a("div",[a("router-link",{attrs:{to:{name:"User Profile",params:{id:e.item.data.user.id}}}},[t._v(t._s(e.item.data.user.first_name+" "+e.item.data.user.last_name+" "))]),e.item.type.includes("OrderPlaced")?a("span",[t._v("request new order")]):a("span",[t._v("Update")]),a("router-link",{attrs:{to:{name:"Edit Order",params:{id:e.item.data.order.id}}}},[t._v(" "+t._s(e.item.data.order.title))])],1)]}},{key:"cell(read)",fn:function(e){return[a("b-button",{attrs:{variant:"info",size:"sm",disabled:t.readNotifications.includes(e.item.id)},on:{click:function(a){return t.markAsRead(e.item)}}},[t._v("Mark as read")])]}}])})],1)],1)],1)},n=[],r=a("bc3a"),s=a.n(r),d=a("a026");d["default"].use(a("2ead"));var o={name:"Notifications",data:function(){return{loading:{main:!1},readNotifications:[],items:[],fields:[{key:"type",label:"Type"},{key:"discription",label:"Discription"},{key:"created_at",label:"Created At"},{key:"read",label:"Read"}]}},methods:{markAsRead:function(t){var e=this;this.readNotifications.push(t.id),s.a.get("/admin/v1/users/markasread/".concat(t.id)).then((function(){e.items.read_at=!0}))},getNotifications:function(){var t=this;this.loading.main=!0,s.a.get("admin/v1/users/notifications/all").then((function(e){t.items=e.data,t.loading.main=!1})).catch((function(){t.loading.main=!1}))},linkGen:function(t){return 1===t?"?":"?page=".concat(t)},getData:function(t){var e=this;this.loading.main=!0,s.a.get("admin/v1/users/notifications?page=".concat(t)).then((function(t){e.loading.main=!1,console.log(t.data),e.items=t.data.data})).catch((function(t){e.loading.main=!1,console.error(t)}))}},mounted:function(){this.getNotifications()}},c=o,l=a("2877"),u=Object(l["a"])(c,i,n,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0d338e.084972fd.js.map