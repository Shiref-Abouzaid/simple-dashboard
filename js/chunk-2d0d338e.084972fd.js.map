{"version":3,"sources":["webpack:///./src/views/notifications/all.vue?ab13","webpack:///src/views/notifications/all.vue","webpack:///./src/views/notifications/all.vue?1a08","webpack:///./src/views/notifications/all.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","items","fields","loading","main","scopedSlots","_u","key","fn","proxy","row","_s","_f","item","created_at","type","includes","name","params","id","data","user","order","title","readNotifications","on","$event","markAsRead","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d0d338e.084972fd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-row',[_c('b-col',{attrs:{\"sm\":\"12\"}},[_c('div',{staticClass:\"d-flex\"},[_c('h1',[_vm._v(\"Notifications\")])]),_c('b-card',[_c('b-table',{attrs:{\"striped\":\"\",\"hover\":\"\",\"items\":_vm.items,\"fields\":_vm.fields,\"busy\":_vm.loading.main},scopedSlots:_vm._u([{key:\"table-busy\",fn:function(){return [_c('div',{staticClass:\"text-center text-danger \"},[_c('b-spinner',{staticClass:\"align-middle\",attrs:{\"variant\":\"primary\",\"type\":\"grow\"}})],1)]},proxy:true},{key:\"cell(created_at)\",fn:function(row){return [_c('span',[_vm._v(_vm._s(_vm._f(\"moment\")(row.item.created_at,\"from\", \"now\")))])]}},{key:\"cell(type)\",fn:function(row){return [(row.item.type.includes('OrderPlaced'))?_c('span',[_vm._v(\"New Order\")]):_c('span',[_vm._v(\"Order Updated\")])]}},{key:\"cell(discription)\",fn:function(row){return [_c('div',[_c('router-link',{attrs:{\"to\":{name:'User Profile', params:{id:row.item.data.user.id}}}},[_vm._v(_vm._s(((row.item.data.user.first_name) + \" \" + (row.item.data.user.last_name) + \" \")))]),(row.item.type.includes('OrderPlaced'))?_c('span',[_vm._v(\"request new order\")]):_c('span',[_vm._v(\"Update\")]),_c('router-link',{attrs:{\"to\":{name:'Edit Order', params:{id:row.item.data.order.id}}}},[_vm._v(\" \"+_vm._s(row.item.data.order.title))])],1)]}},{key:\"cell(read)\",fn:function(row){return [_c('b-button',{attrs:{\"variant\":\"info\",\"size\":\"sm\",\"disabled\":_vm.readNotifications.includes(row.item.id)},on:{\"click\":function($event){return _vm.markAsRead(row.item)}}},[_vm._v(\"Mark as read\")])]}}])})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-row>\n    <b-col sm=\"12\">\n      <div class=\"d-flex\">\n        <h1>Notifications</h1>\n      </div>\n      <!-- <div>\n        <b-input-group class=\"mb-3\" style=\"width:20em\">\n          <template #append>\n            <b-input-group-btn variant=\"primary\" >\n\n              <b-button placeholder=\"Search by user email\"  variant=\"primary\" @click=\"search()\">\n                 <CIcon name=\"cil-search\" />\n              </b-button>\n            </b-input-group-btn>\n          </template>\n          <b-form-input placeholder=\"Search\" v-model=\"keyword\" v-on:keyup.enter=\"search()\"></b-form-input>\n        </b-input-group>\n      </div> -->\n      <b-card>\n        <b-table  striped hover :items=\"items\" :fields=\"fields\" :busy=\"loading.main\">\n          <!--loading-->\n          <template #table-busy>\n            <div class=\"text-center text-danger \">\n              <b-spinner class=\"align-middle\" variant=\"primary\" type=\"grow\"></b-spinner>\n            </div>\n          </template>\n\n\n        <!--date-->\n        <template v-slot:cell(created_at) = row >\n            <span>{{row.item.created_at | moment(\"from\", \"now\")}}</span>\n        </template>\n\n        <!--type-->\n        <template v-slot:cell(type) = row >\n            <span v-if=\"row.item.type.includes('OrderPlaced')\">New Order</span>\n            <span v-else>Order Updated</span>\n        </template>\n\n          <!--discription-->\n          <template v-slot:cell(discription) = row >\n              <div>\n                <router-link :to=\"{name:'User Profile', params:{id:row.item.data.user.id}}\">{{`${row.item.data.user.first_name} ${row.item.data.user.last_name} `}}</router-link>\n                <span v-if=\"row.item.type.includes('OrderPlaced')\">request new order</span>\n                <span v-else>Update</span>\n                 <router-link :to=\"{name:'Edit Order', params:{id:row.item.data.order.id}}\"> {{row.item.data.order.title}}</router-link>\n              </div>\n          </template>\n\n          <!--discription-->\n          <template v-slot:cell(read) = row >\n            <b-button variant=\"info\" size=\"sm\" :disabled=\"readNotifications.includes(row.item.id)\" @click=\"markAsRead(row.item)\">Mark as read</b-button>\n          </template>\n\n        </b-table>\n        <!-- <div class=\"overflow-auto d-flex\">\n          <b-pagination-nav class=\"m-auto\" @change=\"getData($route.query.page)\" :link-gen=\"linkGen\" :number-of-pages=\"items.to\" use-router></b-pagination-nav>\n        </div> -->\n      </b-card>\n    </b-col>\n\n  </b-row>\n</template>\n\n\n<script>\nimport axios from 'axios'\nimport Vue from 'vue'\nVue.use(require('vue-moment'));\nexport default {\n    name:\"Notifications\",\n    data() {\n        return {\n            loading:{\n                main:false,\n            },\n            readNotifications:[],\n            items: [],\n            fields:[\n\n                {key:\"type\", label:\"Type\"},\n                {key:\"discription\", label:\"Discription\"},\n                {key:\"created_at\", label:\"Created At\"},\n                {key:\"read\", label:\"Read\"},\n            ],\n        }\n    },\n    methods:{\n      markAsRead(item) {\n        this.readNotifications.push(item.id)\n         axios.get(`/admin/v1/users/markasread/${item.id}`)\n         .then(()=>{\n            this.items.read_at = true;\n            \n         })\n\n      },\n      getNotifications() {\n            this.loading.main = true\n            axios.get('admin/v1/users/notifications/all')\n            .then(res=>{\n                this.items = res.data;\n                this.loading.main = false\n            })\n            .catch(()=>{\n                this.loading.main = false\n            })\n        },\n      linkGen(pageNum) {\n        return pageNum === 1 ? '?' : `?page=${pageNum}`\n      },\n      getData(page) {\n        this.loading.main = true\n        axios.get(`admin/v1/users/notifications?page=${page}`)\n        .then((res) => {\n          this.loading.main = false;\n          console.log(res.data)\n          this.items = res.data.data\n        })\n        .catch((error) => {\n          this.loading.main = false;\n          console.error(error)\n        })\n      },\n    },\n    mounted() {\n      this.getNotifications();\n    }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./all.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./all.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./all.vue?vue&type=template&id=46ceebe6&\"\nimport script from \"./all.vue?vue&type=script&lang=js&\"\nexport * from \"./all.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}